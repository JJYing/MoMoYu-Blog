{{ define "main" }}
<div class="blog-wrapper">
    <img src="{{ "/assets/images/blog-logo.avif" | relURL }}" alt="MoMoYu Blog Logo" class="nav-bg">
    <div class="inner blog-inner">
        <header class="nav blog-nav blog-nav-post">
            <p class="blog-site-title">MoMoYu Blog</p>
            <a href="{{ "/" | relURL }}" class="blog-page-title-link">
                <h1 class="blog-page-title">{{ .Site.Title }}</h1>
            </a>
            <!-- <a href="{{ "/" | relURL }}" class="blog-nav-all-posts">回到首页</a> -->
        </header>

        <main>
            <article class="box article-box">
                <div class="article-header">
                    <div class="article-meta">
                        <span class="article-author">
                            {{ .Params.author | default .Site.Params.author | default "MoMoYu" }}
                        </span>
                        <span aria-hidden="true">·</span>
                        {{ if .Date }}
                            <time datetime="{{ .Date.Format "2006-01-02" }}">
                                {{ .Date.Format "2006 年 1 月 2 日" }}
                            </time>
                        {{ end }}
                    </div>

                    <h1 class="article-title">{{ .Title }}</h1>

                    {{ if .Description }}
                        <p class="article-description">{{ .Description }}</p>
                    {{ end }}

                    {{ if .Params.tags }}
                        <div class="post-tags">
                            {{ range .Params.tags }}
                                <span class="post-tag"># {{ . }}</span>
                            {{ end }}
                        </div>
                    {{ end }}
                </div>

                <div class="article-divider"></div>

                <div class="article-content">
                    {{ .Content }}
                </div>
            </article>

            {{/* Giscus 评论系统 */}}
            {{ if .Site.Params.giscus.enable }}
            <section class="comments-section box">
                <h3 class="comments-title">评论</h3>
                <div class="giscus-container">
                    <script src="https://giscus.app/client.js"
                        data-repo="{{ .Site.Params.giscus.repo }}"
                        data-repo-id="{{ .Site.Params.giscus.repoId }}"
                        data-category="{{ .Site.Params.giscus.category }}"
                        data-category-id="{{ .Site.Params.giscus.categoryId }}"
                        data-mapping="{{ .Site.Params.giscus.mapping | default "pathname" }}"
                        data-strict="0"
                        data-reactions-enabled="{{ .Site.Params.giscus.reactionsEnabled | default "1" }}"
                        data-emit-metadata="{{ .Site.Params.giscus.emitMetadata | default "0" }}"
                        data-input-position="{{ .Site.Params.giscus.inputPosition | default "top" }}"
                        data-theme="{{ .Site.Params.giscus.theme | default "light" }}"
                        data-lang="{{ .Site.Params.giscus.lang | default "zh-CN" }}"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                    </script>
                </div>
            </section>
            {{ end }}
        </main>
    </div>
</div>
{{ end }}

